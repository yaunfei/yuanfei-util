const e=e=>{if(!e)return;e=parseFloat(e).toFixed(2);const t=new RegExp("(-?\\d+)(\\d{3})");for(;t.test(e);)e=e.replace(t,"$1,$2");return e},t=e=>{if(!e)return;let t=parseFloat(e).toFixed(2).split(".");e=t[0]?.replace(/\b(0+)/g,"").split("").reverse();let l=t[1]?.replace(/(0+)\b/g,"").split(""),r=0;const s={0:"零",1:"壹",2:"贰",3:"叁",4:"肆",5:"伍",6:"陆",7:"柒",8:"捌",9:"玖"},i={0:"",1:"拾",2:"佰",3:"仟"},c={0:"角",1:"分"},$=e=>{if(e&&!(e.length>4))return e.map(((e,t)=>"0"===e?s[0]:`${s[e]}${i[t]}`)).reverse().join("").replace(/(零+)$/g,"")},n=/(0+)$/g,p=/0{4}/;switch(!0){case e.length<5:r=$(e);break;case e.length<9:let t=e.slice(4,e.length).reverse().join(""),l=e.slice(0,4).reverse().join("");r=n.test(t)&&!p.test(l)?`${$(e.slice(4,e.length))}万零${$(e.slice(0,4))}`:`${$(e.slice(4,e.length))}万${$(e.slice(0,4))}`;break;case e.length<13:let s=e.slice(8,e.length).reverse().join(""),i=e.slice(4,8).reverse().join(""),c=e.slice(0,4).reverse().join("");r=!n.test(s)||p.test(i)||p.test(c)?p.test(i)?p.test(c)?`${$(e.slice(8,e.length))}亿${$(e.slice(0,4))}`:`${$(e.slice(8,e.length))}亿零${$(e.slice(0,4))}`:`${$(e.slice(8,e.length))}亿${$(e.slice(4,8))}万${$(e.slice(0,4))}`:n.test(i)?`${$(e.slice(8,e.length))}亿零${$(e.slice(4,8))}万零${$(e.slice(0,4))}`:`${$(e.slice(8,e.length))}亿零${$(e.slice(4,8))}万${$(e.slice(0,4))}`}let o;return r=`${r.replace(/零零零/g,"零").replace(/零零/g,"零")}`,l&&(o=l.map(((e,t)=>{if("0"!==e)return`${s[e]}${c[t]}`})).join("")),r=o?`${r?`${r}元`:r}${o}`:`${r}元整`,r},l=e=>{const t={"零":0,"壹":1,"贰":2,"叁":3,"肆":4,"伍":5,"陆":6,"柒":7,"捌":8,"玖":9},l=e=>{let l=0,r=e.replace(/(\w*仟)(\w*)/,"$1,$2").replace(/(\w*佰)(\w*)/,"$1,$2").replace(/(\w*拾)(\w*)/,"$1,$2").split(",").filter((e=>e&&e.trim()));for(let e of r){let r=0,s=e.split("");r="拾"===s[1]?10*t[s[0]]:"佰"===s[1]?100*t[s[0]]:"仟"===s[1]?1e3*t[s[0]]:t[s[0]],l+=r}return l};let r=0,s=e.replace(/零/g,"").replace(/整/g,"").replace(/(\w*亿)(\w*)/,"$1,$2").replace(/(\w*万)(\w*)/,"$1,$2").replace(/(\w*元)(\w*)/,"$1,$2").replace(/(\w*角)(\w*)/,"$1,$2").split(",").filter((e=>e&&e.trim()));for(let e of s){let s=0,i=e.split("");"亿"===i[i.length-1]?(i.pop(),s=1e8*l(i.join(""))):"万"===i[i.length-1]?(i.pop(),s=1e4*l(i.join(""))):"元"===i[i.length-1]?(i.pop(),s=l(i.join(""))):"角"===i[i.length-1]?(i.pop(),s=.1*t[i[0]]):"分"===i[i.length-1]&&(i.pop(),s=.01*t[i[0]]),r+=s}return r.toString()};export{l as chineseToNum,e as formatterMoney,t as numToChinese};
